# 토정비결 tojung 테이블 내용 증강 프롬프트

## 🎯 목적
토정비결 앱의 핵심 데이터인 tojung 테이블의 운세 내용을 풍성하고 전문적인 수준으로 업그레이드합니다.

---

## 📁 입출력 구조

```
input/
└── tojung.sql              # 원본 INSERT문 파일

output/
└── tojung_enhanced.sql     # 증강된 INSERT문 파일
```

---

## 🔒 핵심 제약 조건

### 1. 테이블 구조 불변
```sql
-- 기존 컬럼 구조 그대로 유지
INSERT INTO public.tojung (
    id,         -- 순번 (변경 금지)
    num,        -- 운세 코드 예: '000', '001', ... '071' (변경 금지)
    total,      -- 연간 종합 운세
    jan,        -- 1월 운세
    feb,        -- 2월 운세
    mar,        -- 3월 운세
    apr,        -- 4월 운세
    may,        -- 5월 운세
    jun,        -- 6월 운세
    jul,        -- 7월 운세
    aug,        -- 8월 운세
    sep,        -- 9월 운세
    oct,        -- 10월 운세
    nov,        -- 11월 운세
    "dec",      -- 12월 운세
    created_at, -- 생성일시 (변경 금지)
    nation      -- 언어 코드: 'k'(한국어), 'e'(영어), 'j'(일본어), 'c'(중국어) (변경 금지)
) VALUES (...);
```

### 2. INSERT문 갯수 동일
- 원본 tojung.sql의 INSERT문 갯수와 결과물의 INSERT문 갯수가 **정확히 일치**해야 함
- id, num, created_at, nation 값은 **절대 변경 금지**

### 3. 다국어 동일 내용
- 같은 num 코드를 가진 4개 언어(k, e, j, c)의 내용은 **의미상 동일**해야 함
- 각 언어의 자연스러운 표현으로 번역

---

## 📝 콘텐츠 증강 가이드라인

### ⚠️ 제외해야 할 내용
**절대 포함하지 말아야 할 내용:**
- 수명 관련 내용 (언제 죽는다, 수명이 짧다/길다 등)
- 죽음, 사망 시기 예측
- 생명과 관련된 부정적 표현
- 원본 데이터에 수명 관련 내용이 있더라도 반드시 제외

**대체 표현:**
- "수명이 길다" → "건강하고 활력 넘치는 한 해"
- "수명 주의" → "건강 관리에 각별히 신경 쓸 필요"

---

### total (연간 종합 운세) - 목표: 1500~2000자

연간 종합 운세는 7개의 섹션으로 구성됩니다:

**구성 섹션:**
1. **종합 운세 개요** - 연간 전체 흐름, 오행 기운, 상반기/하반기 조언
2. **재물운과 재테크 운** - 재물 흐름, 투자 시기, 부동산/금융 조언, 부업 추천
3. **직업운과 승진운** - 업무 성과, 승진/이직 시기, 창업 조언, 직장 내 관계
4. **연애운과 결혼운** - 만남 시기, 관계 발전, 결혼 적기, 가정운
5. **건강운** - 주의할 신체 부위, 운동/식이 조언, 스트레스 관리
6. **인간관계운** - 인맥 형성, 갈등 시기, 소통 조언
7. **학업/자기계발운** - 학습 분야, 자격증 취득 시기, 추천 활동

**증강된 예시:**
```
✨ 1. 2026년 종합 운세
2026년 병오년은 변화와 도전의 해가 될 것입니다. 사주에 금(金)이 강하고 병오년의
화(火)의 기운이 충돌하는 양상을 보이는데, 이는 기존의 안정적인 상황에서 새로운
변화가 찾아올 수 있음을 의미합니다...

✨ 2. 💰 재물운과 재테크 운
2026년 재물운은 상당히 활발한 흐름을 보이나, 안정성과 변동성이 공존합니다.
4월과 9월은 재물이 들어오는 길월로, 이 시기에 투자나 재테크를 시도하면 좋은
결실을 맺을 가능성이 높습니다...

✨ 3. 🏆 직업운과 승진운
직업 영역에서는 도전과 성장의 기회가 함께 찾아오는 해입니다. 5월과 10월은
업무 성과가 인정받고 승진이나 포상의 기회가 있을 수 있는 시기입니다...

✨ 4. ❤️ 연애운과 결혼운
연애운은 중후반부로 갈수록 상승하는 흐름을 보입니다. 특히 5월과 9월은
의미 있는 만남이 이루어질 수 있는 시기입니다...

✨ 5. 🏥 건강운
건강 측면에서는 전반적으로 양호하나, 6월과 11월에는 과로나 스트레스로 인한
면역력 저하가 우려됩니다...

✨ 6. 👥 인간관계운
인간관계는 질적 성장을 이루는 시기입니다. 4월과 9월에는 새로운 인맥이
형성될 가능성이 높습니다...

✨ 7. 📚 학업/자기계발운
지식 확장과 기술 습득에 매우 유리한 해입니다. 3월과 9월은 새로운 공부를
시작하기에 좋은 시기입니다...
```

---

### 월별 운세 (jan ~ dec) - 목표: 400자

각 월별 운세는 해당 월의 상세한 운세를 담습니다.

**포함해야 할 요소:**
- 해당 월의 전체적인 운세 기조
- 재물운 상세 (투자, 소비, 수입 변화)
- 직업운 상세 (업무 성과, 인간관계)
- 건강운 상세 (주의 사항, 권장 활동)
- 연애/인간관계 상세
- 길한 시기와 주의할 시기 (상순/중순/하순)
- 길방위 및 행운의 색상/숫자
- 구체적인 행동 지침과 조언

**증강된 예시:**
```
1월은 새해의 시작과 함께 새로운 기운이 밀려오는 달입니다. 상순에는 지난해의
피로가 남아있을 수 있으니 충분한 휴식을 취하며 체력을 회복하는 것이 좋겠습니다.
중순부터는 활력이 돌아오며 새로운 계획을 세우기에 적합한 시기입니다.

재물운은 안정적인 흐름을 보입니다. 큰 투자보다는 저축과 재정 정리에 집중하는
것이 현명합니다. 특히 15일 전후로 예상치 못한 소득이 생길 수 있으니 긍정적인
마음으로 기회를 맞이하세요.

직업운은 상승세를 타고 있습니다. 새해 첫 달인 만큼 상사와 동료들에게 좋은
인상을 심어줄 수 있는 기회가 많습니다. 적극적인 태도로 업무에 임하면 2월 이후
더 큰 성과로 이어질 것입니다.

건강 면에서는 호흡기 관리에 신경 써야 합니다. 겨울철 건조한 공기로 인해
감기나 기관지 질환에 걸리기 쉬우니, 실내 습도를 적절히 유지하고 따뜻한
음료를 자주 마시세요.

인간관계는 원만한 편입니다. 새해 인사를 나누며 소원했던 지인들과 관계를
회복할 수 있는 좋은 기회입니다. 동쪽과 남쪽 방향이 길하며, 행운의 색상은
파란색과 흰색입니다. 행운의 숫자는 3과 7입니다.
```

---

## 🌏 다국어 번역 가이드

### 한국어 (nation='k')
- 자연스러운 구어체 사용
- "~입니다", "~겠습니다" 체
- 토정비결 특유의 고풍스러운 표현 유지
- 예: "길한 기운이 감도니...", "재물이 들어오는 길월..."

### 영어 (nation='e')
- 자연스럽고 직관적인 표현
- 동양 운세 특유의 분위기 유지
- 예: "Fortune smiles upon you...", "A propitious month for..."

### 일본어 (nation='j')
- 丁寧語(정중어) 사용
- 운세 특유의 표현 활용
- 예: "運気が上昇し...", "金運に恵まれる月です..."

### 중국어 간체 (nation='c')
- 简体字 사용
- 운세/명리학 관련 표현 활용
- 예: "财运亨通...", "吉星高照..."

---

## ⚙️ 작업 프로세스

### Step 1: 원본 분석
```bash
# input/tojung.sql 파일 읽기
# 각 INSERT문 파싱
# id, num, nation별로 그룹핑
```

### Step 2: 내용 증강 (한국어 먼저)
```
각 num 코드별로:
1. 기존 total 내용을 기반으로 2500~3000자로 확장 (7개 섹션 포함)
2. 기존 월별 내용을 기반으로 각 500자 이상으로 확장
3. 토정비결 샘플 스타일 적용
```

### Step 3: 다국어 번역
```
한국어 완성 후:
1. 영어(e) 버전 생성
2. 일본어(j) 버전 생성
3. 중국어(c) 버전 생성
※ 같은 num의 4개 언어는 의미상 동일해야 함
```

### Step 4: INSERT문 생성
```sql
-- id, num, created_at, nation은 원본 값 유지
-- total, jan~dec 컬럼만 증강된 내용으로 교체
INSERT INTO public.tojung (...) VALUES (
    원본_id,
    원본_num,
    '증강된_total_내용',
    '증강된_jan_내용',
    ...
    '증강된_dec_내용',
    원본_created_at,
    원본_nation
);
```

### Step 5: 검증
```
□ INSERT문 갯수가 원본과 동일한가?
□ 모든 id, num, created_at, nation이 원본과 일치하는가?
□ 같은 num의 k, e, j, c 버전이 의미상 동일한가?
□ SQL 문법 오류가 없는가?
□ 문자열 이스케이프가 올바른가? (작은따옴표 '' 처리)
```

---

## 📋 품질 체크리스트

### 내용 품질
- [ ] total이 1500~2000자 범위인가? (7개 섹션 포함)
- [ ] 월별 운세가 400자 정도인가?
- [ ] 재물/직업/건강/인간관계 운이 균형있게 포함되었는가?
- [ ] 구체적인 조언과 행동 지침이 있는가?
- [ ] 길한 시기와 주의할 시기가 명시되었는가?
- [ ] 수명 관련 내용이 완전히 제거되었는가?

### 기술 품질
- [ ] INSERT문 갯수가 원본과 정확히 일치하는가?
- [ ] id, num, created_at, nation 값이 변경되지 않았는가?
- [ ] SQL 문법이 올바른가?
- [ ] 작은따옴표가 올바르게 이스케이프 되었는가? (' → '')
- [ ] 줄바꿈 문자가 올바르게 처리되었는가?

### 다국어 품질
- [ ] 같은 num의 k, e, j, c가 의미상 동일한가?
- [ ] 각 언어가 자연스러운가?
- [ ] 언어별 특유의 운세 표현이 사용되었는가?

---

## 🎨 운세 내용 스타일 참고

### 긍정적 운세 표현 (길운)
| 한국어 | 영어 | 일본어 | 중국어 |
|--------|------|--------|--------|
| 재물이 들어오는 길월 | A propitious month for wealth | 金運に恵まれる月 | 财运亨通之月 |
| 귀인이 도와주니 | With noble assistance | 貴人の助けあり | 贵人相助 |
| 하는 일마다 성공 | Success in all endeavors | 万事順調 | 事事顺利 |
| 길한 기운이 감돈다 | Auspicious energy surrounds | 吉運が巡る | 吉星高照 |

### 주의 필요 표현 (흉운)
| 한국어 | 영어 | 일본어 | 중국어 |
|--------|------|--------|--------|
| 구설수에 주의 | Beware of gossip | 口舌の災いに注意 | 谨防口舌是非 |
| 건강관리에 신경 | Take care of health | 健康管理に注意 | 注意健康 |
| 과욕을 삼가라 | Avoid excessive greed | 欲を控えよ | 切忌贪心 |
| 신중함이 필요 | Prudence is required | 慎重さが必要 | 需要谨慎 |

---

## 📌 최종 출력

```
output/
└── tojung_enhanced.sql
```

파일 내용:
```sql
-- 토정비결 tojung 테이블 증강 데이터
-- 생성일: YYYY-MM-DD
-- 원본 INSERT문 갯수: XXX개
-- 증강 INSERT문 갯수: XXX개 (동일)

INSERT INTO public.tojung (...) VALUES (...);
INSERT INTO public.tojung (...) VALUES (...);
...
```

---

## ⚠️ 주의사항

1. **절대 변경 금지 필드**: id, num, created_at, nation
2. **SQL 인젝션 방지**: 내용에 작은따옴표(')가 있으면 반드시 이스케이프('')
3. **인코딩**: UTF-8 유지
4. **갯수 검증**: 작업 완료 후 반드시 INSERT문 갯수 검증
5. **언어 일관성**: 같은 num의 4개 언어는 반드시 의미상 동일
6. **수명 관련 내용 제외**: 원본 데이터에 수명, 죽음 관련 내용이 있어도 반드시 제외하고 긍정적 표현으로 대체

---

## 🔄 대용량 파일 처리 방법

### 문제
- `tojung.sql` 파일이 1.1MB (약 100,000+ 토큰)으로 한 번에 읽기 불가
- AI 모델의 컨텍스트 제한으로 전체 파일을 한 번에 처리할 수 없음

### 해결: 배치(Batch) 분할 처리

```
총 INSERT문: 284개
권장 배치 크기: 4개 (같은 num의 k, e, j, c를 한 묶음으로)
총 배치 수: 71개 (284 ÷ 4)
```

### 배치 처리 프로세스

```bash
# Step 1: 원본 파일을 num별로 분할
# 같은 num을 가진 4개 언어(k, e, j, c)를 하나의 배치로 묶음

input/
├── tojung.sql              # 원본 전체 파일
└── batches/                # 분할된 배치 폴더
    ├── batch_000.sql       # num='000'의 k, e, j, c (4개)
    ├── batch_001.sql       # num='001'의 k, e, j, c (4개)
    ├── ...
    └── batch_070.sql       # num='070'의 k, e, j, c (4개)

# Step 2: 각 배치별로 증강 처리
# 한 번에 하나의 배치(4개 INSERT문)만 처리

# Step 3: 증강된 배치를 하나로 병합
output/
└── tojung_enhanced.sql     # 모든 배치 병합 결과
```

### 배치 분할 스크립트 예시

```bash
# input/tojung.sql을 num별로 분할
mkdir -p input/batches

# num 코드별로 그룹핑하여 분할
# (실제 구현 시 적절한 스크립트 사용)
```

### 배치 처리 시 체크리스트
- [ ] 각 배치가 같은 num의 4개 언어를 포함하는가?
- [ ] 배치 처리 후 누락된 INSERT문이 없는가?
- [ ] 최종 병합 시 순서가 올바른가?
- [ ] 총 INSERT문 갯수가 284개로 유지되는가?
